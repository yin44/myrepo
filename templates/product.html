{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-6">
        {% if laptop['image'] %}
        <img src="{{ url_for('static', filename='images/' ~ laptop['image']) }}" class="img-fluid rounded" alt="{{ laptop['brand'] }} {{ laptop['model'] }}">
        {% else %}
        <img src="{{ url_for('static', filename='images/default.jpg') }}" class="img-fluid rounded" alt="No image">
        {% endif %}
    </div>
    <div class="col-md-6">
        <h2>{{ laptop['brand'] }} {{ laptop['model'] }}</h2>
        <p><strong>Specifications:</strong> {{ laptop['specs'] }}</p>
        <p><strong>Description:</strong> {{ laptop['description'] }}</p>
        <p>
            <strong>Price:</strong>
            {% if laptop['discount'] and laptop['discount'] > 0 %}
                <span class="text-muted"><del>${{ laptop['price'] }}</del></span>
                <span class="text-danger font-weight-bold">${{ (laptop['price'] * (1 - laptop['discount']/100))|round(2) }}</span>
            {% else %}
                <span class="font-weight-bold">${{ laptop['price'] }}</span>
            {% endif %}
        </p>
        {% if laptop['promotion'] %}
        <p><span class="badge badge-success">{{ laptop['promotion'] }}</span></p>
        {% endif %}
        <p><strong>Stock:</strong> {{ laptop['stock'] }}</p>
        {% if current_user.is_authenticated and current_user.role|string|trim|lower != 'admin' %}
        <form method="post" action="{{ url_for('add_to_cart', laptop_id=laptop.id) }}">
            <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
        {% endif %}
        {% if laptop['discount'] and laptop['discount'] > 0 %}
        <p class="mt-2 text-info">Discount: {{ laptop['discount'] }}%</p>
        {% endif %}
    </div>
</div>
{% endblock %}